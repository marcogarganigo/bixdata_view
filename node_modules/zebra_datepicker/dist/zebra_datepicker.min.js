!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(Ze){"use strict";Ze.Zebra_DatePicker=function(e,q){var p,K,m,X,ee,te,f,b,y,u,v,se,w,k,ne,A,D,C,M,ie,P,F,ae,re,oe,Z,d,S,de,ce,Y,x,I,j,z,le,N,ge,H,O,L,c,T,R,B,_e={always_visible:!(this.version="2.0.0"),container:Ze("body"),current_date:!1,custom_classes:!1,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],days_abbr:!1,default_position:"above",direction:0,disable_time_picker:!1,disabled_dates:!1,enabled_ampm:!1,enabled_dates:!1,enabled_hours:!1,enabled_minutes:!1,enabled_seconds:!1,fast_navigation:!0,first_day_of_week:1,format:"Y-m-d",header_captions:{days:"F, Y",months:"Y",years:"Y1 - Y2"},icon_margin:!1,icon_position:"right",inside:!0,lang_clear_date:"Clear date",months:["January","February","March","April","May","June","July","August","September","October","November","December"],months_abbr:!1,navigation:["&#9664;","&#9654;","&#9650;","&#9660;"],offset:[5,-5],open_icon_only:!1,open_on_focus:!1,pair:!1,readonly_element:!0,rtl:!1,select_other_months:!1,show_clear_date:0,show_icon:"Pick a date",show_other_months:!0,show_select_today:"Today",show_week_number:!1,start_date:!1,strict:!1,view:"days",weekend_days:[0,6],zero_pad:!1,onChange:null,onClear:null,onOpen:null,onClose:null,onSelect:null},he={},W={},ue=!1,E="",pe=!1,me=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),Q=this,J=Ze(e),t=function(e){for(var t,s,a,n={days:["d","j","D"],months:["F","m","M","n","t"],years:["o","Y","y"],hours:["G","g","H","h"],minutes:["i"],seconds:["s"],ampm:["A","a"]},i=null,r=!1,o=0;o<3;o++)E+=Math.floor(65536*(1+Math.random())).toString(16);if(k=[],ne=[],!e)for(t in Q.settings=Ze.extend({},_e,Ze.fn.Zebra_DatePicker.defaults,q),W.readonly=J.attr("readonly"),W.style=J.attr("style"),W.padding_left=parseInt(J.css("paddingLeft"),10)||0,W.padding_right=parseInt(J.css("paddingRight"),10)||0,J.data())0===t.indexOf("zdp_")&&(t=t.replace(/^zdp\_/,""),undefined!==_e[t])&&(Q.settings[t]="pair"===t?Ze(J.data("zdp_"+t)):J.data("zdp_"+t));for(Q.settings.readonly_element?J.attr("readonly","readonly"):J.removeAttr("readonly"),O=!1,R=[];!r;){for(i in n)Ze.each(n[i],function(e,t){var s,n;if(-1<Q.settings.format.indexOf(t))if("days"===i)R.push("days");else if("months"===i)R.push("months");else if("years"===i)R.push("years");else if(("hours"===i||"minutes"===i||"seconds"===i||"ampm"===i)&&!Q.settings.disable_time_picker)if(O||(O={is12hour:!1},R.push("time")),"hours"===i)for("g"===(O.hour_format=t)||"h"===t?(n=12,O.is12hour=!0):n=24,O.hours=[],Array.isArray(Q.settings.enabled_hours)&&(Q.settings.enabled_hour=Q.settings.enabled_hours.map(function(e){return parseInt(e,10)})),s=12===n?1:0;s<(12===n?13:n);s++)(!Array.isArray(Q.settings.enabled_hours)||-1<Ze.inArray(s,Q.settings.enabled_hours))&&O.hours.push(s);else if("minutes"===i)for(O.minutes=[],Array.isArray(Q.settings.enabled_minutes)&&(Q.settings.enabled_minutes=Q.settings.enabled_minutes.map(function(e){return parseInt(e,10)})),s=0;s<60;s++)(!Array.isArray(Q.settings.enabled_minutes)||-1<Ze.inArray(s,Q.settings.enabled_minutes))&&O.minutes.push(s);else if("seconds"===i)for(O.seconds=[],Array.isArray(Q.settings.enabled_seconds)&&(Q.settings.enabled_seconds=Q.settings.enabled_seconds.map(function(e){return parseInt(e,10)})),s=0;s<60;s++)(!Array.isArray(Q.settings.enabled_seconds)||-1<Ze.inArray(s,Q.settings.enabled_seconds))&&O.seconds.push(s);else O.ampm_case=t,Array.isArray(Q.settings.enabled_ampm)&&Ze.grep(Q.settings.enabled_ampm,function(e){return-1<Ze.inArray(e.toLowerCase(),["am","pm"])}).length?O.ampm=Q.settings.enabled_ampm:O.ampm=["am","pm"]});O.hour_format&&O.ampm&&!1===O.is12hour?Q.settings.format=Q.settings.format.replace(O.hour_format,O.hour_format.toLowerCase()):r=!0}for(o in 0===R.length&&(R=["years","months","days"]),-1===Ze.inArray(Q.settings.view,R)&&(Q.settings.view=R[R.length-1]),f=[],Q.settings.custom_classes)Q.settings.custom_classes.hasOwnProperty(o)&&-1===f.indexOf(o)&&f.push(o);for(a=0;a<2+f.length;a++)s=0===a?Q.settings.disabled_dates:1===a?Q.settings.enabled_dates:Q.settings.custom_classes[f[a-2]],Array.isArray(s)&&0<s.length&&Ze.each(s,function(){for(var e,t,s,n=this.split(" "),i=0;i<4;i++){for(n[i]||(n[i]="*"),n[i]=-1<n[i].indexOf(",")?n[i].split(","):new Array(n[i]),e=0;e<n[i].length;e++)if(-1<n[i][e].indexOf("-")&&null!==(s=n[i][e].match(/^([0-9]+)\-([0-9]+)/))){for(t=$(s[1]);t<=$(s[2]);t++)-1===Ze.inArray(t,n[i])&&n[i].push(t+"");n[i].splice(e,1)}for(e=0;e<n[i].length;e++)n[i][e]=isNaN($(n[i][e]))?n[i][e]:$(n[i][e])}(0===a?k:1===a?ne:(undefined===he[f[a-2]]&&(he[f[a-2]]=[]),he[f[a-2]])).push(n)});var d=!1!==Q.settings.current_date?new Date(Q.settings.current_date):new Date,c=Q.settings.reference_date||(J.data("zdp_reference_date")&&undefined!==J.data("zdp_reference_date")?J.data("zdp_reference_date"):d);if(N=undefined,A=undefined,C=c.getMonth(),ee=d.getMonth(),M=c.getFullYear(),te=d.getFullYear(),D=c.getDate(),X=d.getDate(),!0===Q.settings.direction)N=c;else if(!1===Q.settings.direction)re=(A=c).getMonth(),oe=A.getFullYear(),ae=A.getDate();else if(!Array.isArray(Q.settings.direction)&&Ae(Q.settings.direction)&&0<$(Q.settings.direction)||Array.isArray(Q.settings.direction)&&((_=fe(Q.settings.direction[0]))||!0===Q.settings.direction[0]||Ae(Q.settings.direction[0])&&0<Q.settings.direction[0])&&((u=fe(Q.settings.direction[1]))||!1===Q.settings.direction[1]||Ae(Q.settings.direction[1])&&0<=Q.settings.direction[1]))N=_||new Date(M,C,D+(Array.isArray(Q.settings.direction)?$(!0===Q.settings.direction[0]?0:Q.settings.direction[0]):$(Q.settings.direction))),C=N.getMonth(),M=N.getFullYear(),D=N.getDate(),u&&+N<=+u?A=u:!u&&!1!==Q.settings.direction[1]&&Array.isArray(Q.settings.direction)&&(A=new Date(M,C,D+$(Q.settings.direction[1]))),A&&(re=A.getMonth(),oe=A.getFullYear(),ae=A.getDate());else if(!Array.isArray(Q.settings.direction)&&Ae(Q.settings.direction)&&$(Q.settings.direction)<0||Array.isArray(Q.settings.direction)&&(!1===Q.settings.direction[0]||Ae(Q.settings.direction[0])&&Q.settings.direction[0]<0)&&((_=fe(Q.settings.direction[1]))||Ae(Q.settings.direction[1])&&0<=Q.settings.direction[1]))A=new Date(M,C,D+(Array.isArray(Q.settings.direction)?$(!1===Q.settings.direction[0]?0:Q.settings.direction[0]):$(Q.settings.direction))),re=A.getMonth(),oe=A.getFullYear(),ae=A.getDate(),_&&+_<+A?N=_:!_&&Array.isArray(Q.settings.direction)&&(N=new Date(oe,re,ae-$(Q.settings.direction[1]))),N&&(C=N.getMonth(),M=N.getFullYear(),D=N.getDate());else if(Array.isArray(Q.settings.disabled_dates)&&0<Q.settings.disabled_dates.length)for(var l in k)if(-1<Ze.inArray("*",k[l][0])&&-1<Ze.inArray("*",k[l][1])&&-1<Ze.inArray("*",k[l][2])&&-1<Ze.inArray("*",k[l][3])){var g=[];Ze.each(ne,function(){var e=this;"*"!==e[2][0]&&g.push(parseInt(e[2][0]+("*"===e[1][0]?"12":V(e[1][0],2))+("*"===e[0][0]?"*"===e[1][0]?"31":new Date(e[2][0],e[1][0],0).getDate():V(e[0][0],2)),10))}),g.sort(),0<g.length&&(l=(g[0]+"").match(/([0-9]{4})([0-9]{2})([0-9]{2})/),M=parseInt(l[1],10),C=parseInt(l[2],10)-1,D=parseInt(l[3],10));break}if(G(M,C,D)){for(;G(M);)D=(C=N?(M++,0):(M--,11),1);for(;G(M,C);)D=N?(C++,1):(C--,new Date(M,C+1,0).getDate()),11<C?(M++,C=0,D=1):C<0&&(M--,C=11,D=new Date(M,C+1,0).getDate());for(;G(M,C,D);)N?D++:D--,d=new Date(M,C,D),M=d.getFullYear(),C=d.getMonth(),D=d.getDate();d=new Date(M,C,D),M=d.getFullYear(),C=d.getMonth(),D=d.getDate()}Q.settings.start_date&&"object"==typeof Q.settings.start_date&&Q.settings.start_date instanceof Date&&(Q.settings.start_date=ve(Q.settings.start_date));var _,h,u,c=fe(J.val()||Q.settings.start_date||"");c&&Q.settings.strict&&G(c.getFullYear(),c.getMonth(),c.getDate())&&J.val(""),e||undefined===N&&undefined===c||Pe(undefined!==c?c:N),Q.settings.always_visible instanceof jQuery||(e||((K=!1!==Q.settings.show_icon?("firefox"===Fe.name&&J.is('input[type="text"]')&&"inline"===J.css("display")&&J.css("display","inline-block"),u=parseInt(J.css("marginTop"),10)||0,_=parseInt(J.css("marginRight"),10)||0,c=parseInt(J.css("marginBottom"),10)||0,h=parseInt(J.css("marginLeft"),10)||0,u=Ze('<span class="Zebra_DatePicker_Icon_Wrapper"></span>').css({display:J.css("display"),position:"static"===J.css("position")?"relative":J.css("position"),"float":J.css("float"),top:J.css("top"),right:J.css("right"),bottom:J.css("bottom"),left:J.css("left"),marginTop:u<0?u:0,marginRight:_<0?_:0,marginBottom:c<0?c:0,marginLeft:h<0?h:0,paddingTop:u,paddingRight:_,paddingBottom:c,paddingLeft:h}),J.wrap(u).css({position:"relative","float":"none",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0}),F=Ze('<button type="button" class="Zebra_DatePicker_Icon'+("disabled"===J.attr("disabled")?" Zebra_DatePicker_Icon_Disabled":"")+'">'+Q.settings.show_icon+"</button>"),Q.icon=F,Q.settings.open_icon_only?F:F.add(J)):J).on("click.Zebra_DatePicker_"+E+(Q.settings.open_on_focus?" focus.Zebra_DatePicker_"+E:""),function(){b.hasClass("dp_hidden")&&!J.attr("disabled")&&(!pe||Q.settings.readonly_element?Q.show():(clearTimeout(ge),ge=setTimeout(function(){Q.show()},600)))}),K.on("keydown.Zebra_DatePicker_"+E,function(e){9!==e.keyCode||b.hasClass("dp_hidden")||Q.hide()}),!Q.settings.readonly_element&&Q.settings.pair&&J.on("blur.Zebra_DatePicker_"+E,function(){var e;(e=fe(Ze(this).val()))&&!G(e.getFullYear(),e.getMonth(),e.getDate())&&Pe(e)}),undefined!==F&&F.insertAfter(J)),undefined!==F&&(F.attr("style",""),_=J.outerWidth(),c=J.outerHeight(),h=F.outerWidth(),u=F.outerHeight(),F.css("top",(c-u)/2),Q.settings.inside?"right"===Q.settings.icon_position?(F.css("right",!1!==Q.settings.icon_margin?Q.settings.icon_margin:W.padding_right),J.css("paddingRight",2*(!1!==Q.settings.icon_margin?Q.settings.icon_margin:W.padding_right)+h)):(F.css("left",!1!==Q.settings.icon_margin?Q.settings.icon_margin:W.padding_left),J.css("paddingLeft",2*(!1!==Q.settings.icon_margin?Q.settings.icon_margin:W.padding_left)+h)):F.css("left",_+(!1!==Q.settings.icon_margin?Q.settings.icon_margin:W.padding_left)),F.removeClass("Zebra_DatePicker_Icon_Disabled"),"disabled"===J.attr("disabled"))&&F.addClass("Zebra_DatePicker_Icon_Disabled")),le=!1!==Q.settings.show_select_today&&-1<Ze.inArray("days",R)&&!G(te,ee,X)&&Q.settings.show_select_today,e?(Ze(".dp_previous",b).html(Q.settings.navigation[0]),Ze(".dp_next",b).html(Q.settings.navigation[1]),Ze(".dp_time_controls_increase .dp_time_control",b).html(Q.settings.navigation[2]),Ze(".dp_time_controls_decrease .dp_time_control",b).html(Q.settings.navigation[3]),Ze(".dp_clear",b).html(Q.settings.lang_clear_date),Ze(".dp_today",b).html(Q.settings.show_select_today),b.is(":visible")&&(o=Q.settings.view,Q.settings.view=T,Q.show(!1),Q.settings.view=o),b.parent()!==Q.settings.container&&Q.settings.container.append(b.detach())):(Ze(window).on("resize.Zebra_DatePicker_"+E+", orientationchange.Zebra_DatePicker_"+E,function(){Q.hide()}),c='<div class="Zebra_DatePicker"><table class="dp_header dp_actions"><tr><td class="dp_previous">'+Q.settings.navigation[0]+(me?"&#xFE0E;":"")+'</td><td class="dp_caption"></td><td class="dp_next">'+Q.settings.navigation[1]+(me?"&#xFE0E;":"")+'</td></tr></table><table class="dp_daypicker'+(Q.settings.show_week_number?" dp_week_numbers":"")+' dp_body"></table><table class="dp_monthpicker dp_body"></table><table class="dp_yearpicker dp_body"></table><table class="dp_timepicker dp_body"></table><table class="dp_footer dp_actions"><tr><td class="dp_today">'+le+'</td><td class="dp_clear">'+Q.settings.lang_clear_date+'</td><td class="dp_view_toggler dp_icon">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="dp_confirm dp_icon"></td></tr></table></div>',b=Ze(c),Q.datepicker=b,P=Ze("table.dp_header",b),y=Ze("table.dp_daypicker",b),Z=Ze("table.dp_monthpicker",b),L=Ze("table.dp_yearpicker",b),H=Ze("table.dp_timepicker",b),ie=Ze("table.dp_footer",b),z=Ze("td.dp_today",ie),p=Ze("td.dp_clear",ie),x=Ze("td.dp_view_toggler",ie),m=Ze("td.dp_confirm",ie),Q.settings.always_visible instanceof jQuery?J.attr("disabled")||(Q.settings.always_visible.append(b),Q.show()):Q.settings.container.append(b),b.on("mouseover","td:not(.dp_disabled)",function(){Ze(this).addClass("dp_hover")}).on("mouseout","td:not(.dp_disabled)",function(){Ze(this).removeClass("dp_hover")}),be(b),Ze(Q.settings.rtl?".dp_next":".dp_previous",P).on("click",function(){"months"===T?j--:"years"===T?j-=12:--I<0&&(I=11,j--),U()}),Q.settings.fast_navigation&&Ze(".dp_caption",P).on("click",function(){T="days"===T?-1<Ze.inArray("months",R)?"months":-1<Ze.inArray("years",R)?"years":"days":"months"===T?-1<Ze.inArray("years",R)?"years":-1<Ze.inArray("days",R)?"days":"months":-1<Ze.inArray("days",R)?"days":-1<Ze.inArray("months",R)?"months":"years",U()}),Ze(Q.settings.rtl?".dp_previous":".dp_next",P).on("click",function(){"months"===T?j++:"years"===T?j+=12:12==++I&&(I=0,j++),U()}),y.on("click","td:not(.dp_disabled)",function(){var e;Q.settings.select_other_months&&Ze(this).attr("class")&&null!==(e=Ze(this).attr("class").match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/))?Me(e[1],e[2]-1,e[3],"days",Ze(this)):Me(j,I,$(Ze(this).html()),"days",Ze(this))}),Z.on("click","td:not(.dp_disabled)",function(){var e=Ze(this).attr("class").match(/dp\_month\_([0-9]+)/);I=$(e[1]),-1===Ze.inArray("days",R)?Me(j,I,1,"months",Ze(this)):(T="days",Q.settings.always_visible&&J.val(""),U())}),L.on("click","td:not(.dp_disabled)",function(){j=$(Ze(this).html()),-1===Ze.inArray("months",R)?Me(j,0,1,"years",Ze(this)):(T="months",Q.settings.always_visible&&J.val(""),U())}),z.on("click",function(e){var t=!1!==Q.settings.current_date?new Date(Q.settings.current_date):new Date;e.preventDefault(),Me(t.getFullYear(),t.getMonth(),t.getDate(),"days",Ze(".dp_current",y))}),p.on("click",function(e){e.preventDefault(),J.val(""),w=se=v=null,Q.settings.always_visible?Ze("td.dp_selected",b).removeClass("dp_selected"):j=I=null,J.focus(),Q.hide(),Q.settings.onClear&&"function"==typeof Q.settings.onClear&&Q.settings.onClear.call(J)}),x.on("click",function(){"time"!==T?(T="time",U()):Ze(".dp_caption",P).trigger("click")}),m.on("click",function(){var e;Ze(".dp_time_controls_increase td",H).first().trigger("mousedown"),clearInterval(B),Ze(".dp_time_controls_decrease td",H).first().trigger("mousedown"),clearInterval(B),Q.settings.onSelect&&"function"==typeof Q.settings.onSelect&&(e=new Date(j,I,v,O&&O.hours?S+(O.ampm&&("pm"===Y&&S<12||"am"===Y&&12===S)?12:0):0,O&&O.minutes?de:0,O&&O.seconds?ce:0),Q.settings.onSelect.call(J,ve(e),j+"-"+V(I+1,2)+"-"+V(v,2)+(O?" "+V(e.getHours(),2)+":"+V(e.getMinutes(),2)+":"+V(e.getSeconds(),2):""),e)),Q.hide()}),b.on("mousedown",".dp_time_controls_increase td, .dp_time_controls_decrease td",function(){var e=this,t=0;Ce(e),B=setInterval(function(){Ce(e),5<++t&&(clearInterval(B),B=setInterval(function(){Ce(e),10<++t&&(clearInterval(B),B=setInterval(function(){Ce(e)},100,e))},200,e))},400,e)}),b.on("mouseup mouseleave",".dp_time_controls_increase td, .dp_time_controls_decrease td",function(){clearInterval(B)}),Q.settings.always_visible instanceof jQuery||(Ze(document).on("touchmove.Zebra_DatePicker_"+E,function(){ue=!0}),Ze(document).on("mousedown.Zebra_DatePicker_"+E+" touchend.Zebra_DatePicker_"+E,function(e){if("touchend"===e.type&&ue)return ue=!(pe=!0);ue=!1,b.hasClass("dp_hidden")||(!Q.settings.open_icon_only||!Q.icon||Ze(e.target).get(0)===Q.icon.get(0))&&(Q.settings.open_icon_only||Ze(e.target).get(0)===J.get(0)||Q.icon&&Ze(e.target).get(0)===Q.icon.get(0))||0!==Ze(e.target).closest(".Zebra_DatePicker").length||Ze(e.target).hasClass("dp_time_control")||Q.hide(!0)}),Ze(document).on("keyup.Zebra_DatePicker_"+E,function(e){b.hasClass("dp_hidden")||27!==e.which||Q.hide()})),U())},fe=function(e){if(""!==(e+="").trim()){for(var t,s,n=ye(Q.settings.format),i=["d","D","j","l","N","S","w","F","m","M","n","Y","y","G","g","H","h","i","s","a","A"],a=[],r=[],o=null,d=0;d<i.length;d++)-1<(t=n.indexOf(i[d]))&&a.push({character:i[d],position:t});if(a.sort(function(e,t){return e.position-t.position}),Ze.each(a,function(e,t){switch(t.character){case"d":r.push("0?[1-9]|[12][0-9]|3[01]");break;case"D":r.push(Q.settings.days_abbr?Q.settings.days_abbr.map(function(e){return ye(e)}).join("|"):"[a-zÀ-ɏ]{3}");break;case"j":r.push("0?[1-9]|[12][0-9]|3[01]");break;case"l":r.push(Q.settings.days?Q.settings.days.map(function(e){return ye(e)}).join("|"):"[a-zÀ-ɏ]+");break;case"N":r.push("[1-7]");break;case"S":r.push("st|nd|rd|th");break;case"w":r.push("[0-6]");break;case"F":r.push(Q.settings.months?Q.settings.months.map(function(e){return ye(e)}).join("|"):"[a-zÀ-ɏ]+");break;case"m":r.push("0?[1-9]|1[012]");break;case"M":r.push(Q.settings.months_abbr?Q.settings.months_abbr.map(function(e){return ye(e)}).join("|"):"[a-zÀ-ɏ]{3}");break;case"n":r.push("0?[1-9]|1[012]");break;case"Y":r.push("[0-9]{4}");break;case"y":r.push("[0-9]{2}");break;case"G":r.push("[1-9]|1[0-9]|2[0123]");break;case"g":r.push("[0-9]|1[012]");break;case"H":r.push("0[0-9]|1[0-9]|2[0123]");break;case"h":r.push("0[0-9]|1[012]");break;case"i":case"s":r.push("0[0-9]|[12345][0-9]");break;case"a":r.push("am|pm");break;case"A":r.push("AM|PM")}}),r.length&&(a.reverse(),Ze.each(a,function(e,t){n=n.replace(t.character,"("+r[r.length-e-1]+")")}),r=new RegExp("^"+n+"$","ig"),o=r.exec(e))){var c,l,e=new Date,g=1,_=e.getMonth()+1,h=e.getFullYear(),u=e.getHours(),p=e.getMinutes(),m=e.getSeconds(),f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b=["January","February","March","April","May","June","July","August","September","October","November","December"],y=!0;if(a.reverse(),Ze.each(a,function(s,n){if(!y)return!0;switch(n.character){case"m":case"n":_=$(o[s+1]);break;case"d":case"j":g=$(o[s+1]);break;case"D":case"l":case"F":case"M":l="D"===n.character?Q.settings.days_abbr||Q.settings.days:"l"===n.character?Q.settings.days:"M"===n.character&&Q.settings.months_abbr||Q.settings.months,y=!1,Ze.each(l,function(e,t){if(y)return!0;if(o[s+1].toLowerCase()===t.substring(0,"D"===n.character&&!Q.settings.days_abbr||"M"===n.character&&!Q.settings.months_abbr?3:t.length).toLowerCase()){switch(n.character){case"D":o[s+1]=f[e].substring(0,3);break;case"l":o[s+1]=f[e];break;case"F":o[s+1]=b[e],_=e+1;break;case"M":o[s+1]=b[e].substring(0,3),_=e+1}y=!0}});break;case"Y":h=$(o[s+1]);break;case"y":h=$("20"+$(o[s+1]));break;case"G":case"H":case"g":case"h":u=$(o[s+1]);break;case"i":p=$(o[s+1]);break;case"s":m=$(o[s+1]);break;case"a":case"A":c=o[s+1].toLowerCase()}}),y&&(s=new Date(h,(_||1)-1,g||1,u+("pm"===c&&12!==u?12:"am"===c&&12===u?-12:0),p,m)).getFullYear()===h&&s.getDate()===(g||1)&&s.getMonth()===(_||1)-1)return s}return!1}},be=function(e){"firefox"===Fe.name?e.css("MozUserSelect","none"):"explorer"===Fe.name?Ze(document).on("selectstart",e,function(){return!1}):e.on("mousedown",function(){return!1})},ye=function(e){return e.replace(/([-.,*+?^${}()|[\]\/\\])/g,"\\$1")},ve=function(e){for(var t,s="",n=e.getDate(),i=e.getDay(),a=Q.settings.days[i],r=e.getMonth()+1,o=Q.settings.months[r-1],d=e.getFullYear()+"",c=e.getHours(),l=c%12==0?12:c%12,g=e.getMinutes(),_=e.getSeconds(),h=12<=c?"pm":"am",u=0;u<Q.settings.format.length;u++)switch(t=Q.settings.format.charAt(u)){case"y":d=d.substr(2);case"Y":s+=d;break;case"m":r=V(r,2);case"n":s+=r;break;case"M":o=Array.isArray(Q.settings.months_abbr)&&undefined!==Q.settings.months_abbr[r-1]?Q.settings.months_abbr[r-1]:Q.settings.months[r-1].substr(0,3);case"F":s+=o;break;case"d":n=V(n,2);case"j":s+=n;break;case"D":a=Array.isArray(Q.settings.days_abbr)&&undefined!==Q.settings.days_abbr[i]?Q.settings.days_abbr[i]:Q.settings.days[i].substr(0,3);case"l":s+=a;break;case"N":i++;case"w":s+=i;break;case"S":s+=n%10==1&&11!==n?"st":n%10==2&&12!==n?"nd":n%10==3&&13!==n?"rd":"th";break;case"g":s+=l;break;case"h":s+=V(l,2);break;case"G":s+=c;break;case"H":s+=V(c,2);break;case"i":s+=V(g,2);break;case"s":s+=V(_,2);break;case"a":s+=h;break;case"A":s+=h.toUpperCase();break;default:s+=t}return s},s=function(){var e,t,s,n,i,a,r,o,d,c,l=new Date(j,I+1,0).getDate(),g=new Date(j,I,1).getDay(),_=new Date(j,I,0).getDate(),h=(h=g-Q.settings.first_day_of_week)<0?7+h:h;for(De(Q.settings.header_captions.days),t="<tr>",Q.settings.show_week_number&&(t+='<th scope="col">'+Q.settings.show_week_number+"</th>"),e=0;e<7;e++)s=(Q.settings.first_day_of_week+(Q.settings.rtl?6-e:e))%7,t+='<th scope="col">'+(Array.isArray(Q.settings.days_abbr)&&undefined!==Q.settings.days_abbr[s]?Q.settings.days_abbr[s]:Q.settings.days[s].substr(0,2))+"</th>";for(t+="</tr><tr>",e=0;e<42;e++)c=Q.settings.rtl?6-e%7*2:0,0<e&&e%7==0&&(t+="</tr><tr>"),e%7==0&&Q.settings.show_week_number&&(t+='<th scope="row">'+ke(new Date(j,I,e-h+1))+"</th>"),s=e-h+1+c,Q.settings.select_other_months&&(e<h||l<s)&&(i=(n=new Date(j,I,s)).getFullYear(),a=n.getMonth(),r=n.getDate(),n=i+V(a+1,2)+V(r,2)),d=(Q.settings.first_day_of_week+e)%7,d=-1<Ze.inArray(d,Q.settings.weekend_days),Q.settings.rtl&&s<1||!Q.settings.rtl&&e<h?t+='<td class="dp_not_in_month '+(d?"dp_weekend ":"")+(Q.settings.select_other_months&&!G(i,a,r)?"date_"+n:"dp_disabled")+'">'+(Q.settings.select_other_months||Q.settings.show_other_months?V(c+_-h+e+1,Q.settings.zero_pad?2:0):"&nbsp;")+"</td>":l<s?t+='<td class="dp_not_in_month '+(d?"dp_weekend ":"")+(Q.settings.select_other_months&&!G(i,a,r)?"date_"+n:"dp_disabled")+'">'+(Q.settings.select_other_months||Q.settings.show_other_months?V(s-l,Q.settings.zero_pad?2:0):"&nbsp;")+"</td>":(c="",o=we(j,I,s),d&&(c=" dp_weekend"),I===ee&&j===te&&X===s&&(c+=" dp_current"),""!==o&&(c+=" "+o),I===se&&j===w&&v===s&&(c+=" dp_selected"),G(j,I,s)&&(c+=" dp_disabled"),t+="<td"+(""!==c?' class="'+c.trim()+'"':"")+">"+((Q.settings.zero_pad?V(s,2):s)||"&nbsp;")+"</td>");y.html(Ze(t+="</tr>")),Q.settings.always_visible&&(u=Ze("td:not(.dp_disabled)",y)),y.show()},n=function(){De(Q.settings.header_captions.months);for(var e,t,s="<tr>",n=0;n<12;n++)0<n&&n%3==0&&(s+="</tr><tr>"),e="dp_month_"+(t=Q.settings.rtl?2+n-n%3*2:n),G(j,t)?e+=" dp_disabled":!1!==se&&se===t&&j===w?e+=" dp_selected":ee===t&&te===j&&(e+=" dp_current"),s+='<td class="'+e.trim()+'">'+(Array.isArray(Q.settings.months_abbr)&&undefined!==Q.settings.months_abbr[t]?Q.settings.months_abbr[t]:Q.settings.months[t].substr(0,3))+"</td>";Z.html(Ze(s+="</tr>")),Q.settings.always_visible&&(d=Ze("td:not(.dp_disabled)",Z)),Z.show()},i=function(){var e=O.hours&&O.minutes&&O.seconds&&O.ampm,t='<tr class="dp_time_controls_increase'+(e?" dp_time_controls_condensed":"")+'">'+(Q.settings.rtl&&O.ampm?'<td class="dp_time_ampm dp_time_control">'+Q.settings.navigation[2]+"</td>":"")+(O.hours?'<td class="dp_time_hour dp_time_control">'+Q.settings.navigation[2]+"</td>":"")+(O.minutes?'<td class="dp_time_minute dp_time_control">'+Q.settings.navigation[2]+"</td>":"")+(O.seconds?'<td class="dp_time_second dp_time_control">'+Q.settings.navigation[2]+"</td>":"")+(!Q.settings.rtl&&O.ampm?'<td class="dp_time_ampm dp_time_control">'+Q.settings.navigation[2]+"</td>":"")+"</tr>";t+='<tr class="dp_time_segments'+(e?" dp_time_controls_condensed":"")+'">',Q.settings.rtl&&O.ampm&&(t+='<td class="dp_time_ampm dp_disabled'+(O.hours||O.minutes||O.seconds?" dp_time_separator":"")+'"><div>'+("A"===O.ampm_case?Y.toUpperCase():Y)+"</div></td>"),O.hours&&(t+='<td class="dp_time_hours dp_disabled'+(O.minutes||O.seconds||!Q.settings.rtl&&O.ampm?" dp_time_separator":"")+'"><div>'+("h"===O.hour_format||"H"===O.hour_format?V(S,2):S)+"</div></td>"),O.minutes&&(t+='<td class="dp_time_minutes dp_disabled'+(O.seconds||!Q.settings.rtl&&O.ampm?" dp_time_separator":"")+'"><div>'+V(de,2)+"</div></td>"),O.seconds&&(t+='<td class="dp_time_seconds dp_disabled'+(!Q.settings.rtl&&O.ampm?" dp_time_separator":"")+'"><div>'+V(ce,2)+"</div></td>"),!Q.settings.rtl&&O.ampm&&(t+='<td class="dp_time_ampm dp_disabled">'+("A"===O.ampm_case?Y.toUpperCase():Y)+"</td>"),t=t+'</tr><tr class="dp_time_controls_decrease'+(e?" dp_time_controls_condensed":"")+'">'+(Q.settings.rtl&&O.ampm?'<td class="dp_time_ampm dp_time_control">'+Q.settings.navigation[3]+"</td>":"")+(O.hours?'<td class="dp_time_hour dp_time_control">'+Q.settings.navigation[3]+"</td>":"")+(O.minutes?'<td class="dp_time_minute dp_time_control">'+Q.settings.navigation[3]+"</td>":"")+(O.seconds?'<td class="dp_time_second dp_time_control">'+Q.settings.navigation[3]+"</td>":"")+(!Q.settings.rtl&&O.ampm?'<td class="dp_time_ampm dp_time_control">'+Q.settings.navigation[3]+"</td>":"")+"</tr>",H.html(Ze(t)),H.show()},a=function(){De(Q.settings.header_captions.years);for(var e,t,s="<tr>",n=0;n<12;n++)0<n&&n%3==0&&(s+="</tr><tr>"),t=Q.settings.rtl?2+n-n%3*2:n,e="",G(j-7+t)?e+=" dp_disabled":w&&w===j-7+t?e+=" dp_selected":te===j-7+t&&(e+=" dp_current"),s+="<td"+(""!==e.trim()?' class="'+e.trim()+'"':"")+">"+(j-7+t)+"</td>";L.html(Ze(s+="</tr>")),Q.settings.always_visible&&(c=Ze("td:not(.dp_disabled)",L)),L.show()},we=function(s,n,i){var a,e,r;for(e in void 0!==n&&(n+=1),f)if(a=f[e],r=!1,Array.isArray(he[a])&&Ze.each(he[a],function(){var e,t;return!r&&(-1<Ze.inArray(s,(e=this)[2])||-1<Ze.inArray("*",e[2]))&&(void 0!==n&&-1<Ze.inArray(n,e[1])||-1<Ze.inArray("*",e[1]))&&(void 0!==i&&-1<Ze.inArray(i,e[0])||-1<Ze.inArray("*",e[0]))&&(-1<Ze.inArray("*",e[3])||(t=new Date(s,n-1,i).getDay(),-1<Ze.inArray(t,e[3])))?r=a:void 0}),r)return r;return r||""},ke=function(e){var t,s,n,i=e.getFullYear(),a=e.getMonth()+1,e=e.getDate(),i=a<3?(s=(t=((r=i-1)/4|0)-(r/100|0)+(r/400|0))-(((r-1)/4|0)-((r-1)/100|0)+((r-1)/400|0)),n=0,e-1+31*(a-1)):(n=(s=(t=((r=i)/4|0)-(r/100|0)+(r/400|0))-(((r-1)/4|0)-((r-1)/100|0)+((r-1)/400|0)))+1,e+((153*(a-3)+2)/5|0)+58+s),e=(r+t)%7,a=i+3-(i+e-n)%7,r=a<0?53-((e-s)/5|0):364+s<a?1:1+(a/7|0);return r},G=function(s,n,i){var e,t,a,r;if(!(undefined!==s&&!isNaN(s)||undefined!==n&&!isNaN(n)||undefined!==i&&!isNaN(i)))return!1;if(s<1e3)return!0;if(Array.isArray(Q.settings.direction)||0!==$(Q.settings.direction)){if(8===(t=((e=$(o(s,void 0!==n?V(n,2):"",void 0!==i?V(i,2):"")))+"").length)&&(void 0!==N&&e<$(o(M,V(C,2),V(D,2)))||void 0!==A&&e>$(o(oe,V(re,2),V(ae,2)))))return!0;if(6===t&&(void 0!==N&&e<$(o(M,V(C,2)))||void 0!==A&&e>$(o(oe,V(re,2)))))return!0;if(4===t&&(void 0!==N&&e<M||void 0!==A&&oe<e))return!0}return void 0!==n&&(n+=1),r=a=!1,Array.isArray(k)&&k.length&&Ze.each(k,function(){var e,t;return!a&&(-1<Ze.inArray(s,(e=this)[2])||-1<Ze.inArray("*",e[2]))&&(void 0!==n&&-1<Ze.inArray(n,e[1])||-1<Ze.inArray("*",e[1]))&&(void 0!==i&&-1<Ze.inArray(i,e[0])||-1<Ze.inArray("*",e[0]))&&(-1<Ze.inArray("*",e[3])||(t=new Date(s,n-1,i).getDay(),-1<Ze.inArray(t,e[3])))?a=!0:void 0}),ne&&Ze.each(ne,function(){if(!r){var e,t=this;if((-1<Ze.inArray(s,t[2])||-1<Ze.inArray("*",t[2]))&&(r=!0,void 0!==n))if(r=!0,-1<Ze.inArray(n,t[1])||-1<Ze.inArray("*",t[1])){if(void 0!==i){if(r=!0,-1<Ze.inArray(i,t[0])||-1<Ze.inArray("*",t[0]))return-1<Ze.inArray("*",t[3])||(e=new Date(s,n-1,i).getDay(),-1<Ze.inArray(e,t[3]))?r=!0:void(r=!1);r=!1}}else r=!1}}),!(ne&&r||!k||!a)},Ae=function(e){return(e+"").match(/^\-?[0-9]+$/)},De=function(e){!isNaN(parseFloat(I))&&isFinite(I)&&(e=e.replace(/\bm\b|\bn\b|\bF\b|\bM\b/,function(e){switch(e){case"m":return V(I+1,2);case"n":return I+1;case"F":return Q.settings.months[I];case"M":return Array.isArray(Q.settings.months_abbr)&&undefined!==Q.settings.months_abbr[I]?Q.settings.months_abbr[I]:Q.settings.months[I].substr(0,3);default:return e}})),!isNaN(parseFloat(j))&&isFinite(j)&&(e=e.replace(/\bY\b/,j).replace(/\by\b/,(j+"").substr(2)).replace(/\bY1\b/i,j-7).replace(/\bY2\b/i,j+4)),Ze(".dp_caption",P).html(e)},U=function(e){var t;""===y.text()||"days"===T?(""===y.text()?(Q.settings.always_visible instanceof jQuery||b.css("left",-1e3),b.removeClass("hidden"),s(),t="undefined"!=typeof y[0].getBoundingClientRect&&"undefined"!=typeof y[0].getBoundingClientRect().height?y[0].getBoundingClientRect().height:y.outerHeight(!0),Z.css("height",t),L.css("height",t),H.css("height",t+P.outerHeight(!0)),b.css("width",b.outerWidth()),b.addClass("dp_hidden")):s(),P.show(),Z.hide(),L.hide(),H.hide(),x.hide(),m.hide(),O&&x.show().removeClass("dp_calendar")):"months"===T?(n(),y.hide(),L.hide(),H.hide(),x.hide(),m.hide()):"years"===T?(a(),y.hide(),Z.hide(),H.hide(),x.hide(),m.hide()):"time"===T&&(i(),1===R.length?(x.hide(),m.show()):(x.show().addClass("dp_calendar"),""===J.val()?m.hide():m.show()),P.hide(),y.hide(),Z.hide(),L.hide()),!1!==e&&Q.settings.onChange&&"function"==typeof Q.settings.onChange&&undefined!==T&&((t="days"===T?y.find("td:not(.dp_disabled)"):"months"===T?Z.find("td:not(.dp_disabled)"):"years"===T?L.find("td:not(.dp_disabled)"):H.find(".dp_time_segments td")).each(function(){var e;"days"===T?Ze(this).hasClass("dp_not_in_month")&&!Ze(this).hasClass("dp_disabled")?(e=Ze(this).attr("class").match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/),Ze(this).data("date",e[1]+"-"+e[2]+"-"+e[3])):Ze(this).data("date",j+"-"+V(I+1,2)+"-"+V($(Ze(this).text()),2)):"months"===T?(e=Ze(this).attr("class").match(/dp\_month\_([0-9]+)/),Ze(this).data("date",j+"-"+V($(e[1])+1,2))):"years"===T&&Ze(this).data("date",$(Ze(this).text()))}),Q.settings.onChange.call(J,T,t)),ie.show(),"time"===T&&1<R.length?(z.hide(),p.hide(),x.css("width",""===J.val()?"100%":"50%")):(z.show(),p.show(),!0===Q.settings.show_clear_date||0===Q.settings.show_clear_date&&""!==J.val()||Q.settings.always_visible&&!1!==Q.settings.show_clear_date?le?(z.css("width","50%"),p.css("width","50%")):(z.hide(),p.css("width",-1<Ze.inArray(R,"time")?"50%":"100%")):(p.hide(),le?z.css("width","100%"):(z.hide(),O&&("time"===T||"days"===T)||ie.hide())))},Ce=function(e){var t=0<Ze(e).parent(".dp_time_controls_increase").length,e=Ze(e).attr("class").match(/dp\_time\_([^\s]+)/i),s=Ze(".dp_time_segments .dp_time_"+e[1]+("ampm"!==e[1]?"s":""),H),n=s.text().toLowerCase(),i=O[e[1]+("ampm"!==e[1]?"s":"")],n=Ze.inArray("ampm"!==e[1]?parseInt(n,10):n,i),t=-1===n?0:t?n+1>=i.length?0:n+1:n-1<0?i.length-1:n-1;"hour"===e[1]?S=i[t]:"minute"===e[1]?de=i[t]:"second"===e[1]?ce=i[t]:Y=i[t],v=(v=!v&&Q.settings.start_date&&(n=fe(Q.settings.start_date))?n.getDate():v)||D,s.text(V(i[t],2).toUpperCase()),Me(j,I,v)},Me=function(e,t,s,n,i){var a=new Date(e,t,s,O&&O.hours?S+(O.ampm?"pm"===Y&&12!==S?12:"am"===Y&&12===S?-12:0:0):12,O&&O.minutes?de:0,O&&O.seconds?ce:0),r="days"===n?u:"months"===n?d:c,o=ve(a);J.val(o),(Q.settings.always_visible||O)&&(se=a.getMonth(),I=a.getMonth(),w=a.getFullYear(),j=a.getFullYear(),v=a.getDate(),i)&&r&&(r.removeClass("dp_selected"),i.addClass("dp_selected"),"days"===n)&&i.hasClass("dp_not_in_month")&&!i.hasClass("dp_disabled")&&Q.show(),O?(T="time",U()):(J.focus(),Q.hide()),Pe(a),!O&&Q.settings.onSelect&&"function"==typeof Q.settings.onSelect&&Q.settings.onSelect.call(J,o,e+"-"+V(t+1,2)+"-"+V(s,2),a)},o=function(){for(var e="",t=0;t<arguments.length;t++)e+=arguments[t]+"";return e},V=function(e,t){for(e+="";e.length<t;)e="0"+e;return e},$=function(e){return parseInt(e,10)},Pe=function(s){Q.settings.pair&&Ze.each(Q.settings.pair,function(){var e,t=Ze(this);t.data&&t.data("Zebra_DatePicker")?((e=t.data("Zebra_DatePicker")).update({reference_date:s,direction:0===e.settings.direction?1:e.settings.direction}),e.settings.always_visible&&e.show()):t.data("zdp_reference_date",s)})},Fe={init:function(){this.name=this.searchString(this.dataBrowser)||"",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(e){for(var t,s,n=0;n<e.length;n++)if(t=e[n].string,s=e[n].prop,this.versionSearchString=e[n].versionSearch||e[n].identity,t){if(-1!==t.indexOf(e[n].subString))return e[n].identity}else if(s)return e[n].identity},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!==t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};Q.settings={},Q.clear_date=function(){Ze(p).trigger("click")},Q.destroy=function(){undefined!==Q.icon&&(Q.icon.off("click.Zebra_DatePicker_"+E),Q.icon.off("focus.Zebra_DatePicker_"+E),Q.icon.off("keydown.Zebra_DatePicker_"+E),Q.icon.remove()),b.off(),b.remove(),!Q.settings.show_icon||Q.settings.always_visible instanceof jQuery||J.unwrap(),J.off("blur.Zebra_DatePicker_"+E),J.off("click.Zebra_DatePicker_"+E),J.off("focus.Zebra_DatePicker_"+E),J.off("keydown.Zebra_DatePicker_"+E),J.off("mousedown.Zebra_DatePicker_"+E),Ze(document).off("keyup.Zebra_DatePicker_"+E),Ze(document).off("mousedown.Zebra_DatePicker_"+E),Ze(document).off("touchend.Zebra_DatePicker_"+E),Ze(window).off("resize.Zebra_DatePicker_"+E),Ze(window).off("orientationchange.Zebra_DatePicker_"+E),J.removeData("Zebra_DatePicker"),J.attr("readonly",W.readonly),J.attr("style",W.style||""),J.css("paddingLeft",W.padding_left),J.css("paddingRight",W.padding_right)},Q.hide=function(e){b.hasClass("dp_hidden")||Q.settings.always_visible&&!e||(b.addClass("dp_hidden"),Q.settings.onClose&&"function"==typeof Q.settings.onClose&&Q.settings.onClose.call(J))},Q.set_date=function(e){var t;"object"==typeof e&&e instanceof Date&&(e=ve(e)),(t=fe(e))&&!G(t.getFullYear(),t.getMonth(),t.getDate())&&(J.val(e),Pe(t))},Q.show=function(e){T=Q.settings.view;var t,s,n,i,a,r,o,d=fe(J.val()||Q.settings.start_date||"");d?(se=d.getMonth(),I=d.getMonth(),w=d.getFullYear(),j=d.getFullYear(),v=d.getDate(),G(w,se,v)&&(Q.settings.strict&&J.val(""),I=C,j=M)):(I=C,j=M),O&&(d=d||new Date,S=d.getHours(),de=d.getMinutes(),ce=d.getSeconds(),Y=12<=S?"pm":"am",O.is12hour&&(S=S%12==0?12:S%12),Array.isArray(Q.settings.enabled_hours)&&-1===Ze.inArray(S,Q.settings.enabled_hours)&&(S=Q.settings.enabled_hours[0]),Array.isArray(Q.settings.enabled_minutes)&&-1===Ze.inArray(de,Q.settings.enabled_minutes)&&(de=Q.settings.enabled_minutes[0]),Array.isArray(Q.settings.enabled_seconds)&&-1===Ze.inArray(ce,Q.settings.enabled_seconds)&&(ce=Q.settings.enabled_seconds[0]),Array.isArray(Q.settings.enabled_ampm))&&-1===Ze.inArray(Y,Q.settings.enabled_ampm)&&(Y=Q.settings.enabled_ampm[0]),U(e),Q.settings.always_visible instanceof jQuery||(Q.settings.container.is("body")?(d=b.outerWidth(),t=b.outerHeight(),s=(undefined!==F?F.offset().left+F.outerWidth(!0):J.offset().left+J.outerWidth(!0))+Q.settings.offset[0],n=(undefined!==F?F:J).offset().top-t+Q.settings.offset[1],i=Ze(window).width(),a=Ze(window).height(),r=Ze(window).scrollTop(),o=Ze(window).scrollLeft(),"below"===Q.settings.default_position&&(n=(undefined!==F?F:J).offset().top+Q.settings.offset[1]),b.css({left:s=(s=o+i<s+d?o+i-d:s)<o?o:s,top:n=(n=r+a<n+t?r+a-t:n)<r?r:n})):b.css({left:0,top:0})),b.removeClass("dp_hidden"),!1!==e&&Q.settings.onOpen&&"function"==typeof Q.settings.onOpen&&Q.settings.onOpen.call(J)},Q.update=function(e){Q.original_direction&&(Q.original_direction=Q.direction),Q.settings=Ze.extend(Q.settings,e),t(!0)},Fe.init(),t()},Ze.fn.Zebra_DatePicker=function(t){return this.each(function(){undefined!==Ze(this).data("Zebra_DatePicker")&&Ze(this).data("Zebra_DatePicker").destroy();var e=new Ze.Zebra_DatePicker(this,t);Ze(this).data("Zebra_DatePicker",e)})},Ze.fn.Zebra_DatePicker.defaults={}});