<script>


    function getUserWorktime() {
        $.ajax({
            url: "{% url 'get_user_worktime' %}",
            type: 'POST',
            success: function (data) {
                var worktime_decimal = data.worktime;
                var percentage = worktime_decimal * 12.5;
                var dashArrayValue = percentage + ', 100';

                // Update the circular progress bar
                $('.circle').attr('stroke-dasharray', dashArrayValue);
                $('.percentage').text(percentage.toFixed(2) + '%');
                $('#hours-left').text('Ti mancano ancora ' + (8 - worktime_decimal).toFixed(2) + ' ore');
                
                
            }
        });
    }

    $(document).ready(function () {
        getUserWorktime();
    });

</script>
<div class="container text-center" style="width:80%; margin-left: 5%;">
    <div id="worktime-progress" class="circular-progress">
        <svg viewBox="0 0 36 36" class="circular-chart">
            <path class="circle-bg"
                d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831" />
            <path class="circle"
                stroke-dasharray="0, 100"
                d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831" />
            <text x="18" y="20.35" class="percentage">0%</text>
        </svg>
    </div>
    <br>
    <p id="hours-left"></p>
</div>


<style>
    .circular-progress {
    position: relative;
    width: 100px;
    height: 100px;
    margin: auto;
}

.circular-chart {
    display: block;
    margin: 10px auto;
    max-width: 100%;
    max-height: 250px;
}

.circle-bg {
    fill: none;
    stroke: #eee;
    stroke-width: 3.8;
}

.circle {
    fill: none;
    stroke-width: 2.8;
    stroke-linecap: round;
    stroke: #4caf50;
    transition: stroke-dasharray 0.3s;
}

.percentage {
    fill: #4caf50;
    font-size: 5pt;
    text-anchor: middle;
    dominant-baseline: middle;
}

</style>

