<script>


    function getUserTablesList(userid)
    {
        $("#block_user_tables").html('Loading');
        var serialized_data = [];
        serialized_data.push({ name: 'userid', value: userid });
        $.ajax({
            type: "POST",
            crossDomain: true,
            url: "{% url 'block_user_tables' %}",
            data: serialized_data,
            success: function (response) {
                $("#block_user_tables").html(response);
            },
            error: function () {
                $("#block_user_tables").html(response);
            }
        });
    }

function saveTableSettings() {
    var serialized_data = [];
    
    var orderArray = [];

    $('.drag-item2').each(function () {
        if ($(this).find('input[type="checkbox"]').is(':checked')) {
            orderArray.push($(this).data('tableid'));
        }
    });


    orderArray = JSON.stringify(orderArray);
    serialized_data.push({ name: 'tables', value: orderArray });
    $.ajax({
        type: "POST",
        url: "{% url 'save_table_settings' %}",
        data: serialized_data,
        success: function (response) {
            $("#table_options").html(response);
        },
        error: function () {
        }
    });
}


</script>

<div id="settings_table" style="height: 100%;">
    <div id="block_users" style="width: 20%;float: left;">
        <button type="button" class="btn btn-primary" onclick="saveTableSettings()">Salva</button>
        {{block_users}}
    </div>
    <div id="block_user_tables" style="width: 20%;float: left;">
        
    </div>

    <div id="table_options">

    </div>
</div>




